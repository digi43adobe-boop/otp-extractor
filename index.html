<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIGI43 SECURITY - OTP EXTRACTOR</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body { background-color: #0d1117; color: #00ff00; font-family: 'Fira Code', monospace; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .container { border: 1px solid #00ff00; box-shadow: 0 0 15px rgba(0, 255, 0, 0.2); padding: 40px; border-radius: 4px; width: 100%; max-width: 500px; background-color: #0a0e14; }
        .title { font-size: 22px; font-weight: 700; text-shadow: 0 0 10px rgba(0, 255, 0, 0.8); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .title svg { width: 24px; height: 24px; stroke: #00ff00; stroke-width: 2; fill: none; }
        hr { border: none; border-top: 1px solid rgba(0, 255, 0, 0.3); margin-bottom: 25px; }
        .label { font-size: 14px; margin-bottom: 10px; opacity: 0.8; }
        .input-wrapper { display: flex; background: rgba(0, 255, 0, 0.05); border: 1px solid #00ff00; border-radius: 4px; padding: 15px; margin-bottom: 25px; align-items: center; }
        .input-wrapper span { color: #00ff00; margin-right: 12px; font-weight: bold; }
        input { background: transparent; border: none; outline: none; color: #ffffff; font-family: 'Fira Code', monospace; font-size: 16px; width: 100%; }
        button { width: 100%; background: transparent; color: #00ff00; border: 1px solid #00ff00; padding: 15px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; letter-spacing: 2px; text-transform: uppercase; }
        button:hover { background: #00ff00; color: #000; box-shadow: 0 0 20px #00ff00; }
        button:disabled { border-color: #333; color: #333; cursor: not-allowed; }
        .result-box { margin-top: 25px; padding: 15px; border: 1px solid transparent; display: none; border-radius: 4px; line-height: 1.6; }
        .result-box.error { display: block; border-color: #ff3333; color: #ff3333; background: rgba(255, 51, 51, 0.1); }
        .result-box.success { display: block; border-color: #00ff00; color: #00ff00; background: rgba(0, 255, 0, 0.1); }
        .otp-highlight { font-size: 36px; font-weight: bold; display: block; margin-top: 10px; text-shadow: 0 0 15px #00ff00; color: #fff; text-align: center; letter-spacing: 5px; cursor: pointer; }
    </style>
</head>
<body>
<div class="container">
    <div class="title">
        <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
        OTP_EXTRACTOR_V1.1
    </div>
    <hr>
    <div class="label">> TARGET_EMAIL_ADDRESS (@digi43.net)</div>
    <div class="input-wrapper">
        <span>>_</span>
        <input type="text" id="emailInput" placeholder="username@digi43.net" spellcheck="false">
    </div>
    <button id="extractBtn">EXTRACT OTP</button>
    <div id="resultBox" class="result-box"></div>
</div>

<script>
    const btn = document.getElementById('extractBtn');
    const emailInput = document.getElementById('emailInput');
    const resultBox = document.getElementById('resultBox');

    // LINK WEB APP GOOGLE APPS SCRIPT CỦA BẠN
    const GAS_URL = "https://script.google.com/macros/s/AKfycbxezzI7yJxCvhwkRksSNk3PWzTMXGZMiNDmvocXhcv67uyZtV7vHrYajsVIJ2p6cHsApw/exec";

    btn.addEventListener('click', async () => {
        const email = emailInput.value.trim();
        if (!email) return showResult('error', '[!] ERR: Email field cannot be empty.');

        btn.disabled = true;
        btn.innerText = "RUNNING_EXPLOIT [///]...";
        resultBox.style.display = 'none';

        try {
            const response = await fetch(`${GAS_URL}?email=${encodeURIComponent(email)}`);
            const data = await response.json();

            if (data.status === "success") {
                showResult('success', `
                    [+] EMAIL: ${email}<br>
                    [+] RECEIVED: ${data.time}<br>
                    <span class="otp-highlight" id="otpCode" title="Click to copy">${data.code}</span>
                    <div style="text-align:center; font-size:10px; opacity:0.5; margin-top:5px;">(Click code to copy)</div>
                `);

                // Tính năng Copy không dùng Alert thông báo
                document.getElementById('otpCode').onclick = function() {
                    const code = this.innerText;
                    navigator.clipboard.writeText(code);
                    
                    // Hiệu ứng xác nhận trên nút bấm
                    const originalText = btn.innerText;
                    btn.innerText = "COPIED TO CLIPBOARD!";
                    btn.style.backgroundColor = "#00ff00";
                    btn.style.color = "#000";
                    
                    setTimeout(() => {
                        btn.innerText = "EXTRACT OTP";
                        btn.style.backgroundColor = "transparent";
                        btn.style.color = "#00ff00";
                    }, 2000);
                };
            } else {
                showResult('error', `[!] FAILED: ${data.message}${data.time ? '<br>[!] Last attempt: '+data.time : ''}`);
            }
        } catch (error) {
            showResult('error', `[!] CRITICAL_ERR: ${error.message}`);
        } finally {
            if (btn.innerText !== "COPIED TO CLIPBOARD!") {
                btn.disabled = false;
                btn.innerText = "EXTRACT OTP";
            } else {
                // Đợi hiệu ứng copy xong mới cho bấm tiếp
                setTimeout(() => {
                    btn.disabled = false;
                }, 2000);
            }
        }
    });

    function showResult(type, html) {
        resultBox.className = `result-box ${type}`;
        resultBox.innerHTML = html;
        resultBox.style.display = 'block';
    }
</script>
</body>
</html>
